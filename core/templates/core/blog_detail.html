{% extends "core/base.html" %}

{% block title %}{{ post.title }} - Treefel{% endblock %}

{% block content %}
<article class="max-w-3xl mx-auto">
    <!-- Header Image -->
    {% if post.header_image %}
    <div class="mb-8 -mx-4 sm:mx-0">
        <img
            src="{{ post.header_image }}"
            alt="{{ post.title }}"
            class="w-full rounded-none sm:rounded-2xl shadow-lg max-h-[28rem] object-cover"
        >
    </div>
    {% endif %}

    <!-- Post Header -->
    <header class="mb-8">
        <!-- Category Badge -->
        {% if post.category %}
        <span class="inline-block px-3 py-1 text-xs font-medium rounded-full bg-tertiary/40 text-secondary-dark mb-4">
            {{ post.category.name }}
        </span>
        {% endif %}

        <!-- Title -->
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-dark leading-tight mb-4" style="font-family: 'Stick', sans-serif;">
            {{ post.title }}
        </h1>

        <!-- Meta: Date and Tags -->
        <div class="flex flex-wrap items-center gap-4 text-sm text-dark/50">
            <time datetime="{{ post.created_at|date:'Y-m-d' }}" class="flex items-center gap-1.5">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                {{ post.created_at|date:"F j, Y" }}
            </time>

            {% if tags %}
            <span class="w-px h-4 bg-dark/20"></span>
            <div class="flex flex-wrap items-center gap-2">
                <svg class="w-4 h-4 text-dark/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
                </svg>
                {% for tag in tags %}
                <span class="inline-block px-2.5 py-0.5 text-xs rounded-full bg-light-dim text-dark/60">
                    {{ tag }}
                </span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </header>

    <!-- Divider -->
    <hr class="border-light-dim mb-8">

    <!-- Post Body -->
    <div class="prose prose-lg max-w-none text-dark/85 leading-relaxed space-y-5
                [&_h2]:font-bold [&_h2]:text-2xl [&_h2]:text-dark [&_h2]:mt-10 [&_h2]:mb-4
                [&_h3]:font-bold [&_h3]:text-xl [&_h3]:text-dark [&_h3]:mt-8 [&_h3]:mb-3
                [&_p]:mb-4
                [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:mb-4
                [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:mb-4
                [&_li]:mb-1
                [&_a]:text-primary [&_a]:underline [&_a]:hover:text-secondary
                [&_img]:rounded-xl [&_img]:shadow-md [&_img]:my-6
                [&_blockquote]:border-l-4 [&_blockquote]:border-primary/30 [&_blockquote]:pl-4 [&_blockquote]:italic [&_blockquote]:text-dark/60
                [&_code]:bg-dark/5 [&_code]:px-1.5 [&_code]:py-0.5 [&_code]:rounded [&_code]:text-sm
                [&_pre]:bg-dark [&_pre]:text-light [&_pre]:p-4 [&_pre]:rounded-xl [&_pre]:overflow-x-auto"
         style="font-family: 'Poor Story', cursive; font-size: 1.15rem;">
        {{ post.body|safe }}
    </div>

    <!-- Back Link -->
    <div class="mt-12 pt-8 border-t border-light-dim">
        <a href="{% url 'core:blog_list' %}" class="inline-flex items-center gap-2 text-primary hover:text-secondary no-underline font-medium transition-colors duration-200 group">
            <svg class="w-5 h-5 transform group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"/>
            </svg>
            Back to all posts
        </a>
    </div>
</article>
{% endblock %}
